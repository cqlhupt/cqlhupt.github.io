---
title: NAND Flash标准接口
top: true
date: 2023-08-12 20:52:25
tags:
---
毕业也已经一年了，2021年11月拿到了现公司的offer，22年4月份应公司邀请提前到公司实习（主要是当时公司人太少了，我来了之后芯片设计一共5人，验证1人，项目开始后迟迟招不到人）。5月回校答辩，6月正式成为社畜打工人。由于工作安排，接受offer之后一直在熟悉NAND flash相关的接口，到目前为止，MPW芯片即将回片，虽然已经预见存在很多问题，不过已经完成了fullmask阶段的修改。NAND flash的接口与DDR SDRAM接口存在一定的相似性，在此记录以便巩固相关知识，也为后续工作和学习打下基础。
<!--more-->

# 概述
* JEDEC协会统一管理，分化出ONFi（开放）和Toggle（封闭）
* 具有和DDR SDRAM类似的接口
* 地址和数据复用同一组数据线（还未发布的JESD230G版本中可能会将二者分开）
* 

# 信号定义
| 名称    | 来源         | 描述                                                                                          |
| ------- | ------------ | --------------------------------------------------------------------------------------------- |
| CE_n     | 主控       | 片选信号，低电平有效，用于使能颗粒                                                                 |
| ALE     | 主控       | 地址锁存使能信号，高电平有效                                                |
| CLE   | 主控        | 命令锁存使能信号，高电平有效                                         |
| WE_n/CLK   | 主控        | SDR模式中写数据、命令和地址的边沿信号<br>NVDDR模式中向颗粒输出持续时钟<br>NVDDR2/NVDDR3/NVLPDDR4/Toggle模式中写命令和地址的边沿信号 |
| RE_n/RE_n_c | 主控        |    SDR模式中读数据边沿信号，用于采样<br>NVDDR模式中指示读写高电平表示写，低电平表示读<br>NVDDR2/NVDDR3/NVLPDDR4/Toggle模式中主控发送给颗粒的读数据的边沿信号                                                          |
| DQS/DQS_c  | 主控/颗粒   | 用于NVDDR/NVDDR2/NVDDR3/NVLPDDR4/Toggle模式的数据strobe信号<br>写数据时其边沿位于DQ信号窗口的中间，由主控发往颗粒<br>读数据时其边沿与DQ信号变化边沿对齐，由颗粒接收RE_n信号后返回给主控  |
| DQ[7:0]  | 主控/颗粒        | 数据信号，有8位和16位两种，16位的较为少见，且16位数据线在发送地址和命令时只使用低8位，只有在传输数据时才会使用全部16位数据线        |
| WP_n  | 主控         | 写保护，低电平有效<br>可复用为ODT控制线，用于主控控制颗粒的ODT使能时间而不是颗粒自动ODT             |
| Rb_n  | 颗粒         | ready/busy信号，高电平表示ready，低电平表示busy     |

\* 此处的信号均为数字信号，如需了解电源相关模拟信号，请参考具体颗粒手册或ONFi协议

